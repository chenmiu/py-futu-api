============
下载历史数据
============

.. note::

    *   历史K线需要下载才可以查询到


--------------------------------------

程序自动下载
============

1. 运行。在FutuOpenD同目录下找到FutuHistData，在命令行控制台输入命令或双击运行

   .. image:: ../_static/FutuHistDataPath.png
   
2. 历史数据下载配置。可以在配置文件（FutuHistData.xml）中设置下载时间段、k线类型和下载位置等。

   .. image:: ../_static/FutuHistDataConfig.png

   ====================    =============================================================================================
   配置项					说明
   ====================    =============================================================================================
   enable					0为不下载，非0为下载
   nnid						下载历史数据需要先在FutuOpenD登录相应的牛牛号，例如FutuOpenD中登录牛牛号10000，这里要写10000
   begin_time				时间格式为HHMM，每天到当地这个时间点开始下载，例如0800表示8:00开始下载
   end_time					时间格式为HHMM，每天到当地这个时间点暂停下载，end小于begin时表示end为第二天。最大为2359
   market					市场类型，可选值有hk、us、cn，多个市场用|连接，如hk|cn|us
   kline_type				k线类型，可选值有day、week、month、year、min1、min5、min15、min30、min60，多个类型用|连接 
   hist_data_dir			存储位置，最好预留300G以上硬盘空间
   ====================    =============================================================================================

   修改配置后需要重启历史下载工具才能生效。

3. 历史数据更新。支持增量更新，每天运行FutuHistData.exe，就会自动下载尚未更新的数据了。

